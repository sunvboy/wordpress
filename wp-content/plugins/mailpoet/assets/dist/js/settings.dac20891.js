"use strict";(self.webpackChunkMailPoet3=self.webpackChunkMailPoet3||[]).push([[571],{15113:function(e,t,n){var a={};n.r(a),n.d(a,{loadSettings:function(){return I},openWoocommerceCustomizer:function(){return D},recalculateSubscribersScore:function(){return A},reinstall:function(){return N},saveSettings:function(){return S},sendCongratulatoryMssEmail:function(){return f},sendTestEmail:function(){return P},setErrorFlag:function(){return k},setSetting:function(){return y},setSettings:function(){return Z},updateKeyActivationState:function(){return b},verifyMssKey:function(){return h},verifyPremiumKey:function(){return v}});var r={};n.r(r),n.d(r,{getAmazonSesOptions:function(){return Q},getDefaultSegments:function(){return H},getKeyActivationState:function(){return Y},getPages:function(){return j},getPaths:function(){return J},getSavingError:function(){return K},getSegments:function(){return $},getSendGridOptions:function(){return ee},getSetting:function(){return V},getSettings:function(){return R},getTestEmailState:function(){return te},getWebHosts:function(){return X},hasErrorFlag:function(){return U},hasMembersPlugin:function(){return z},hasSavingError:function(){return G},hasWooCommerce:function(){return x},isBuiltInCaptchaSupported:function(){return q},isMssActive:function(){return W},isNewUser:function(){return B},isSaving:function(){return O}});var l={};n.r(l),n.d(l,{CALL_API:function(){return ne.Z},TRACK_REINSTALLED:function(){return re},TRACK_SETTINGS_SAVED:function(){return ae},TRACK_TEST_EMAIL_SENT:function(){return le}});var i=n(45993),s=n.n(i),o=(n(7295),n(97846)),c=n.n(o),m=n(71304),u=n(61299),p=n(76867);let d,E,_,g;function b(e){return{type:"UPDATE_KEY_ACTIVATION_STATE",fields:e}}function*h(e){const{success:t,error:n,res:a}=yield{type:"CALL_API",endpoint:"services",action:"checkMSSKey",data:{key:e}};if(!t)return b({mssStatus:E.INVALID,mssMessage:n.join(" ")||null});const r={mssMessage:a.data.message||null},l=(0,u.Ys)(Ee).getSettings();l.mta_group="mailpoet",l.mta={...l.mta,method:"MailPoet",mailpoet_api_key:e},l.signup_confirmation.enabled="1";const i=yield{type:"CALL_API",endpoint:"settings",action:"set",data:l};return i.success?(yield Z(i.res.data),r.mssStatus=E.VALID_MSS_ACTIVE):r.mssStatus=E.VALID_MSS_NOT_ACTIVE,b(r)}function*v(e){var t,n,a;const{res:r,success:l,error:i}=yield{type:"CALL_API",endpoint:"services",action:"checkPremiumKey",data:{key:e}};var s;if(!l)return p.Z.trackEvent("User has failed to validate a Premium key",{"MailPoet Free version":p.Z.version,"Premium plugin is active":!!p.Z.premiumVersion}),b({premiumStatus:d.INVALID,premiumMessage:i.join(" ")||null,code:null==r||null===(s=r.meta)||void 0===s?void 0:s.code});yield y(["premium","premium_key"],e);const o=r.meta.premium_plugin_active;let c=d.VALID_PREMIUM_PLUGIN_NOT_ACTIVE;return o&&(c=d.VALID_PREMIUM_PLUGIN_ACTIVE),yield b({premiumMessage:null,premiumStatus:c,code:null==r||null===(t=r.meta)||void 0===t?void 0:t.code,downloadUrl:null==r||null===(n=r.meta)||void 0===n||null===(a=n.premium_plugin_info)||void 0===a?void 0:a.download_link}),p.Z.trackEvent("User has validated a Premium key",{"MailPoet Free version":p.Z.version}),null}function*f(){const e=yield{type:"CALL_API",endpoint:"services",action:"sendCongratulatoryMssEmail"};return e&&e.success?b({congratulatoryMssEmailSentTo:e.res.data.email_address}):null}function y(e,t){return{type:"SET_SETTING",path:e,value:t}}function Z(e){return{type:"SET_SETTINGS",value:e}}function k(e){return{type:"SET_ERROR_FLAG",value:e}}function*S(){yield{type:"SAVE_STARTED"};const e=(0,u.Ys)(Ee).getSettings(),t=JSON.stringify(e),n=JSON.parse(t,((e,t)=>"string"==typeof t?t.trim():t)),{success:a,error:r,res:l}=yield{type:"CALL_API",endpoint:"settings",action:"set",data:n};return a?(yield{type:"TRACK_SETTINGS_SAVED"},yield b({congratulatoryMssEmailSentTo:null,fromAddressModalCanBeShown:!1}),yield Z(l.data),{type:"SAVE_DONE"}):{type:"SAVE_FAILED",error:r}}function*I(){const{success:e,error:t,res:n}=yield{type:"CALL_API",endpoint:"settings",action:"get"};return e?Z(n.data):{type:"SAVE_FAILED",error:t}}function*N(){p.Z.Modal.loading(!0);const{success:e,error:t}=yield{type:"CALL_API",endpoint:"setup",action:"reset"};return p.Z.Modal.loading(!1),e?(yield{type:"TRACK_REINSTALLED"},{type:"SAVE_DONE"}):{type:"SAVE_FAILED",error:t}}function*A(){return p.Z.Modal.loading(!0),yield{type:"CALL_API",endpoint:"settings",action:"recalculateSubscribersScore"},p.Z.Modal.loading(!1),{type:"SAVE_DONE"}}function T(e){return t=>e(t.target.value)}!function(e){e[e.INVALID=0]="INVALID",e[e.VALID_PREMIUM_PLUGIN_NOT_INSTALLED=1]="VALID_PREMIUM_PLUGIN_NOT_INSTALLED",e[e.VALID_PREMIUM_PLUGIN_NOT_ACTIVE=2]="VALID_PREMIUM_PLUGIN_NOT_ACTIVE",e[e.VALID_PREMIUM_PLUGIN_ACTIVE=3]="VALID_PREMIUM_PLUGIN_ACTIVE",e[e.VALID_PREMIUM_PLUGIN_BEING_INSTALLED=4]="VALID_PREMIUM_PLUGIN_BEING_INSTALLED",e[e.VALID_PREMIUM_PLUGIN_BEING_ACTIVATED=5]="VALID_PREMIUM_PLUGIN_BEING_ACTIVATED"}(d||(d={})),function(e){e[e.INVALID=0]="INVALID",e[e.VALID_MSS_NOT_ACTIVE=1]="VALID_MSS_NOT_ACTIVE",e[e.VALID_MSS_ACTIVE=2]="VALID_MSS_ACTIVE"}(E||(E={})),function(e){e[e.INSTALL_INSTALLING=0]="INSTALL_INSTALLING",e[e.INSTALL_ACTIVATING=1]="INSTALL_ACTIVATING",e[e.INSTALL_DONE=2]="INSTALL_DONE",e[e.INSTALL_INSTALLING_ERROR=3]="INSTALL_INSTALLING_ERROR",e[e.INSTALL_ACTIVATING_ERROR=4]="INSTALL_ACTIVATING_ERROR",e[e.ACTIVATE_ACTIVATING=5]="ACTIVATE_ACTIVATING",e[e.ACTIVATE_DONE=6]="ACTIVATE_DONE",e[e.ACTIVATE_ERROR=7]="ACTIVATE_ERROR"}(_||(_={})),function(e){e[e.SENDING=0]="SENDING",e[e.NONE=1]="NONE",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(g||(g={}));var C=n(44732),w=e=>p.Z.emailRegex.test(e),M=n(96486),L=n.n(M),F=(0,M.curry)(((e,t)=>{e(t.toLowerCase())}));function*P(e,t){if(!e)return{type:"TEST_EMAIL_FAILED",error:[(0,C.Z)("cantSendEmail")]};yield{type:"START_TEST_EMAIL_SENDING"};const n=yield{type:"CALL_API",endpoint:"mailer",action:"send",data:{mailer:t,newsletter:{subject:(0,C.Z)("testEmailSubject"),body:{html:`<p>${(0,C.Z)("testEmailBody")}</p>`,text:(0,C.Z)("testEmailBody")}},subscriber:e}};return yield{type:"TRACK_TEST_EMAIL_SENT",success:n.success,method:t.method},n.success?{type:"TEST_EMAIL_SUCCESS"}:{type:"TEST_EMAIL_FAILED",error:n.error}}function*D(e){let t=e;if(!t){const{res:e,success:n,error:a}=yield{type:"CALL_API",endpoint:"settings",action:"set",data:{"woocommerce.use_mailpoet_editor":1}};if(!n)return{type:"SAVE_FAILED",error:a};t=e.data.woocommerce.transactional_email_id}return window.location.href=`?page=mailpoet-newsletter-editor&id=${t}`,null}function V(e,t){return L().get(e.data,t)}function R(e){return e.data}function O(e){return e.save.inProgress}function U(e){return e.flags.error}function G(e){return null!==e.save.error}function K(e){return e.save.error}function x(e){return e.flags.woocommerce}function z(e){return e.flags.membersPlugin}function q(e){return e.flags.builtInCaptcha}function B(e){return e.flags.newUser}function W(e){return"MailPoet"===L().get(e,"data.mta.method")}function $(e){return e.segments}function H(e){return e.segments.filter((e=>"default"===e.type))}function j(e){return e.pages}function Y(e){return e.keyActivation}function J(e){return e.paths}function X(e){return{...e.hosts.web,manual:{name:(0,C.Z)("notListed"),emails:25,interval:5}}}function Q(e){return e.hosts.smtp.AmazonSES}function ee(e){return e.hosts.smtp.SendGrid}function te(e){return e.testEmail}var ne=n(25643);function ae(){const e=(0,u.Ys)(Ee).getSettings(),t={"MailPoet Free version":p.Z.version,"Sending method type":e.mta_group||null,"Sending frequency (emails)":"mailpoet"!==e.mta_group&&e.mta&&e.mta.frequency&&e.mta.frequency.emails,"Sending frequency (interval)":"mailpoet"!==e.mta_group&&e.mta&&e.mta.frequency&&e.mta.frequency.interval,"Sending provider":"smtp"===e.mta_group&&e.smtp_provider,"Sign-up confirmation enabled":e.signup_confirmation&&e.signup_confirmation.enabled,"Bounce email is present":e.bounce&&""!==e.bounce.address,"Newsletter task scheduler method":e.cron_trigger&&e.cron_trigger.method};p.Z.isWoocommerceActive&&(t["WooCommerce email customizer enabled"]=e.woocommerce&&e.woocommerce.use_mailpoet_editor),p.Z.trackEvent("User has saved Settings",t)}function re(){p.Z.trackEvent("User has reinstalled MailPoet via Settings",{"MailPoet Free version":p.Z.version})}function le({success:e,method:t}){p.Z.trackEvent("User has sent a test email from Settings",{"Sending was successful":!!e,"Sending method type":t,"MailPoet Free version":p.Z.version})}function ie(e){return t=>void 0===t?e:t?`${t}`:""}function se(e,t,n){return a=>void 0===a?n:a===e||a===t?a:a?e:t}function oe(e,t){return n=>e.includes(n)?n:t}function ce(e){return t=>Object.keys(e).reduce(((n,a)=>({[a]:e[a](t?t[a]:void 0),...n})),{})}function me(e){return e}function ue(e){const t=ie(""),n=se("1","0","0"),a=se("1","0","1"),r=se("1","",""),l=se("1","","1"),i=(s=[],e=>L().isArray(e)?e.map(ie("")):s);var s;const o=oe(["server","manual","AmazonSES","SendGrid"],"server");return ce({sender:ce({name:t,address:t}),reply_to:ce({name:t,address:t}),bounce:ce({address:t}),subscribe:ce({on_comment:ce({enabled:n,label:ie((0,C.Z)("yesAddMe")),segments:i}),on_register:ce({enabled:n,label:ie((0,C.Z)("yesAddMe")),segments:i})}),subscription:ce({pages:ce({manage:t,unsubscribe:t,confirmation:t,captcha:t,confirm_unsubscribe:t}),segments:i}),stats_notifications:ce({enabled:a,automated:a,address:t}),subscriber_email_notification:ce({enabled:l,address:t}),cron_trigger:ce({method:oe(["WordPress","MailPoet","Linux Cron"],"WordPress")}),tracking:ce({enabled:l}),send_transactional_emails:r,deactivate_subscriber_after_inactive_days:oe(["","90","180","365"],"180"),analytics:ce({enabled:r}),"3rd_party_libs":ce({enabled:r}),captcha:ce({type:oe(["","built-in","recaptcha"],"built-in"),recaptcha_site_token:t,recaptcha_secret_token:t}),logging:oe(["everything","errors","nothing"],"errors"),mta_group:oe(["mailpoet","website","smtp"],"website"),mta:ce({method:oe(["MailPoet","AmazonSES","SendGrid","PHPMail","SMTP"],"PHPMail"),frequency:ce({emails:ie("25"),interval:ie("5")}),mailpoet_api_key:t,host:t,port:t,region:ie("us-east-1"),access_key:t,secret_key:t,api_key:t,login:t,password:t,encryption:t,authentication:oe(["1","-1"],"1"),mailpoet_api_key_state:ce({state:oe(["valid","invalid","expiring","already_used","check_error"],"check_error"),data:me})}),mailpoet_smtp_provider:o,smtp_provider:o,web_host:ie("manual"),mailpoet_sending_frequency:oe(["auto","manual"],"manual"),signup_confirmation:ce({enabled:l,subject:t,body:t}),woocommerce:ce({use_mailpoet_editor:r,transactional_email_id:t,optin_on_checkout:ce({enabled:l,segments:i,message:t}),accept_cookie_revenue_tracking:ce({enabled:r,set:l})}),mailpoet_subscribe_old_woocommerce_customers:ce({enabled:l}),premium:ce({premium_key:t,premium_key_state:ce({state:oe(["valid","invalid","expiring","already_used","check_error"],"check_error"),data:me})}),authorized_emails_addresses_check:me})(e)}function pe(e){let t;return(n=e,a)=>{switch(a.type){case"SET_SETTING":return(0,M.setWith)((0,M.clone)(n),["data",...a.path],a.value,M.clone);case"SET_SETTINGS":return{...n,data:ue(a.value)};case"SET_ERROR_FLAG":return{...n,flags:{...n.flags,error:!!a.value}};case"SAVE_STARTED":return{...n,save:{inProgress:!0,error:null}};case"SAVE_DONE":return{...n,save:{inProgress:!1,error:null}};case"SAVE_FAILED":return{...n,save:{inProgress:!1,error:a.error}};case"UPDATE_KEY_ACTIVATION_STATE":return t={...n.keyActivation,...a.fields},t.isKeyValid=null,null!==t.mssStatus&&null!==t.premiumStatus&&(t.isKeyValid=t.mssStatus!==E.INVALID||t.premiumStatus!==d.INVALID),{...n,keyActivation:t};case"START_TEST_EMAIL_SENDING":return{...n,testEmail:{state:g.SENDING,error:null}};case"TEST_EMAIL_SUCCESS":return{...n,testEmail:{state:g.SUCCESS,error:null}};case"TEST_EMAIL_FAILED":return{...n,testEmail:{state:g.FAILURE,error:a.error}};default:return n}}}function de(e){const t=e.mailpoet_pages,n=e.mailpoet_paths,a=e.mailpoet_segments,r=e.mailpoet_hosts,l=ue(e.mailpoet_settings),i={error:!1,newUser:!!e.mailpoet_is_new_user,woocommerce:!!e.mailpoet_woocommerce_active,membersPlugin:!!e.mailpoet_members_plugin_active,builtInCaptcha:e.mailpoet_built_in_captcha_supported};let s=null,o=null,c=null;return(l.premium.premium_key||l.mta.mailpoet_api_key)&&(o=function(e,t){return e?"MailPoet"===t.mta.method?E.VALID_MSS_ACTIVE:E.VALID_MSS_NOT_ACTIVE:E.INVALID}(e.mailpoet_mss_key_valid,l),c=function(e,t){const n=!!p.Z.premiumVersion;return e?n?d.VALID_PREMIUM_PLUGIN_ACTIVE:t?d.VALID_PREMIUM_PLUGIN_NOT_ACTIVE:d.VALID_PREMIUM_PLUGIN_NOT_INSTALLED:d.INVALID}(e.mailpoet_premium_key_valid,e.mailpoet_premium_plugin_installed),s=o!==E.INVALID||c!==d.INVALID),{data:l,flags:i,save:{inProgress:!1,error:null},keyActivation:{isKeyValid:s,mssStatus:o,premiumStatus:c,mssMessage:null,premiumMessage:null,fromAddressModalCanBeShown:!1,premiumInstallationStatus:null,key:l.premium.premium_key||l.mta.mailpoet_api_key,inProgress:!1,congratulatoryMssEmailSentTo:null,downloadUrl:e.mailpoet_premium_plugin_download_url},segments:a,pages:t,paths:n,hosts:r,testEmail:{state:g.NONE,error:null}}}const Ee="mailpoet-settings";var _e=n(93726),ge=n(5830),be=n(48228),he=n(53681),ve=n(99181),fe=({title:e,description:t,htmlFor:n})=>s().createElement("div",{className:"mailpoet-settings-label"},s().createElement("label",{className:"mailpoet-settings-label-title",htmlFor:n},e),t&&s().createElement("p",{className:"description"},t)),ye=({children:e})=>s().createElement("div",{className:"mailpoet-settings-inputs"},e),Ze=n(57744),ke=n(41882);function Se(e){return(0,ke.Z)(Ee)[e]}var Ie=n(94878);function Ne(e,t=[]){return(0,Ie.Z)((t=>{const n=t(Ee);return n[e].bind(n)}),t)}function Ae(...e){const t=Ne("getSetting"),n=Se("setSetting");return[t(e),s().useCallback((t=>n(e,t)),e)]}var Te=()=>{const[e,t]=s().useState(!1),n=Ne("isSaving")(),a=Ne("hasErrorFlag")(),r=Ne("getSavingError")(),l=Se("saveSettings"),{notices:i}=s().useContext(m.k),o=i.error,c=i.success;return s().useEffect((()=>{e&&!n&&(r?o(r.map((e=>s().createElement("p",null,e))),{scroll:!0}):c(s().createElement("p",null,p.Z.I18n.t("settingsSaved")),{scroll:!0}))}),[e,r,n,o,c]),s().createElement("div",{className:"mailpoet-settings-save"},s().createElement(Ze.Z,{type:"button",automationId:"settings-submit-button",isDisabled:n||a,onClick:()=>{t(!0),l()}},p.Z.I18n.t("saveSettings")))},Ce=n(21200),we=e=>{const t=Ne(e.segmentsSelector?e.segmentsSelector:"getDefaultSegments")().map((e=>({value:e.id,label:e.name,count:e.subscribers}))),n=t.filter((t=>e.value.includes(t.value)));return s().createElement(Ce.Z,{isMulti:!0,defaultValue:n,id:e.id,placeholder:e.placeholder,options:t,onChange:t=>{e.setValue((t||[]).map((e=>e.value)))}})},Me=n(2141),Le=e=>{const t=Ne("getPages")();let n=t.find((t=>t.id===parseInt(e.value,10)));return n||(n=t[0]),s().createElement("div",{className:"mailpoet-settings-inputs-row mailpoet-settings-inputs-row-centered"},s().createElement(Me.Z,{id:e.id,automationId:e.automationId,value:n.id,onChange:T(e.setValue),isMinWidth:!0,dimension:"small"},t.map((e=>s().createElement("option",{key:e.id,value:e.id},`${e.title}`)))),s().createElement("span",{className:"mailpoet-gap"}),s().createElement("a",{className:"mailpoet-link",target:"_blank",title:(0,C.Z)("previewPage"),rel:"noopener noreferrer",href:n.url[e.preview],"data-automation-id":e.linkAutomationId},(0,C.Z)("preview")))},Fe=n(60017),Pe=n(43246);function De(){const e=Ne("isMssActive")(),[t,n]=Ae("sender","name"),[a,r]=Ae("sender","address"),[l,i]=Ae("reply_to","name"),[o,c]=Ae("reply_to","address"),m=Se("setErrorFlag"),u=a&&!w(a),p=o&&!w(o);return s().useEffect((()=>{m(u||p)}),[p,u,m]),s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("defaultSenderTitle"),description:(0,C.Z)("defaultSenderDescription"),htmlFor:"sender-name"}),s().createElement(ye,null,s().createElement("label",{htmlFor:"sender-name"},(0,C.Z)("from")),s().createElement("br",null),s().createElement(Fe.Z,{dimension:"small",type:"text",id:"sender-name",placeholder:(0,C.Z)("yourName"),"data-automation-id":"from-name-field",value:t,onChange:T(n)}),s().createElement("br",null),s().createElement(Fe.Z,{dimension:"small",type:"text",placeholder:"from@mydomain.com","data-automation-id":"from-email-field",value:a,onChange:T(F(r))}),s().createElement("br",null),u&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,C.Z)("invalidEmail")),s().createElement("div",{className:"regular-text"},s().createElement(Pe.Z,{emailAddress:a,mssActive:e})),s().createElement("label",{className:"mailpoet-settings-inputs-row",htmlFor:"reply_to-name"},"Reply-to"),s().createElement(Fe.Z,{dimension:"small",type:"text",id:"reply_to-name",placeholder:(0,C.Z)("yourName"),"data-automation-id":"reply_to-name-field",value:l,onChange:T(i)}),s().createElement("br",null),s().createElement(Fe.Z,{dimension:"small",type:"text",placeholder:"reply_to@mydomain.com","data-automation-id":"reply_to-email-field",value:o,onChange:T(F(c))}),s().createElement("br",null),p&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,C.Z)("invalidEmail"))))}var Ve=n(45697),Re=n.n(Ve),Oe=n(89828);function Ue({title:e,description:t,event:n}){const[a,r]=Ae("subscribe",n,"enabled"),[l,i]=Ae("subscribe",n,"label"),[o,c]=Ae("subscribe",n,"segments");return s().useEffect((()=>{""===l&&i((0,C.Z)("yesAddMe"))}),[l,i]),s().createElement(s().Fragment,null,s().createElement(fe,{title:e,description:t,htmlFor:`subscribe-${n}-enabled`}),s().createElement(ye,null,s().createElement(Oe.Z,{id:`subscribe-${n}-enabled`,automationId:`subscribe-${n}-checkbox`,checked:"1"===a,onCheck:e=>r(e?"1":"0")}),"1"===a&&s().createElement(s().Fragment,null,s().createElement("br",null),s().createElement(Fe.Z,{dimension:"small",type:"text",value:l,onChange:T(i)}),s().createElement("label",{className:"mailpoet-settings-inputs-row",htmlFor:`subscribe-${n}-segments`},(0,C.Z)("usersWillBeSubscribedTo")),s().createElement("div",{"data-automation-id":`subscribe-${n}-segments-selection`},s().createElement(we,{id:`subscribe-${n}-segments`,placeholder:(0,C.Z)("chooseList"),value:o,setValue:c})))))}Ue.propTypes={title:Re().string.isRequired,description:Re().string.isRequired,event:Re().oneOf(["on_comment","on_register"]).isRequired};var Ge=n(27927),Ke=n.n(Ge);function xe(){const[e,t]=Ae("subscription","pages","manage"),[n,a]=Ae("subscription","segments");return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("manageSubTitle"),description:s().createElement(s().Fragment,null,(0,C.Z)("manageSubDescription1")," ",Ke()((0,C.Z)("manageSubDescription2"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://kb.mailpoet.com/article/222-customize-your-manage-subscription-page",rel:"noopener noreferrer","data-beacon-article":"59ddd0bb2c7d3a40f0ed5b57",target:"_blank"},e)))),htmlFor:"subscription-manage-page"}),s().createElement(ye,null,s().createElement(Le,{value:e,preview:"manage",setValue:t,id:"subscription-manage-page",automationId:"subscription-manage-page-selection",linkAutomationId:"preview_manage_subscription_page_link"}),s().createElement("label",{className:"mailpoet-settings-inputs-row",htmlFor:"subscription-segments"},(0,C.Z)("subscribersCanChooseFrom")),s().createElement(we,{id:"subscription-segments",value:n,setValue:a,placeholder:(0,C.Z)("leaveEmptyToDisplayAll")})))}function ze(){const[e,t]=Ae("subscription","pages","unsubscribe"),[n,a]=Ae("subscription","pages","confirm_unsubscribe");return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("unsubscribeTitle"),description:s().createElement(s().Fragment,null,Ke()((0,C.Z)("unsubscribeDescription1"),"[mailpoet_page]",(()=>s().createElement("code",{key:"mp"},"[mailpoet_page]")))," ",Ke()((0,C.Z)("unsubscribeDescription2"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://kb.mailpoet.com/article/221-customize-your-unsubscribe-page",rel:"noopener noreferrer","data-beacon-article":"59dcea10042863379ddc8b4d",target:"_blank"},e)))),htmlFor:"subscription-pages-unsubscribe"}),s().createElement(ye,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,C.Z)("confirmationPageTitle"),":"),s().createElement(Le,{value:n,preview:"confirm_unsubscribe",setValue:a,id:"subscription-pages-unsubscribe-confirmation",automationId:"unsubscribe-confirmation-page-selection",linkAutomationId:"unsubscribe_page_preview_link_confirmation"}),s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,C.Z)("successPageTitle"),":"),s().createElement(Le,{value:e,preview:"unsubscribe",setValue:t,id:"subscription-pages-unsubscribe",automationId:"unsubscribe-success-page-selection",linkAutomationId:"unsubscribe_page_preview_link"})))}function qe(){const[e,t]=Ae("stats_notifications","enabled"),[n,a]=Ae("stats_notifications","automated"),[r,l]=Ae("stats_notifications","address"),i=Se("setErrorFlag"),o=("1"===e||"1"===n)&&""===r.trim(),c=r&&!w(r);return s().useEffect((()=>{i(o||c)}),[o,c,i]),s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("statsNotifsTitle"),description:(0,C.Z)("statsNotifsDescription"),htmlFor:"stats-enabled"}),s().createElement(ye,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Oe.Z,{id:"stats-enabled",checked:"1"===e,onCheck:e=>t(e?"1":"0")}),s().createElement("label",{htmlFor:"stats-enabled"},(0,C.Z)("newslettersAndPostNotifs"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Oe.Z,{id:"stats-automated",checked:"1"===n,onCheck:e=>a(e?"1":"0")}),s().createElement("label",{htmlFor:"stats-automated"},(0,C.Z)("welcomeAndWcEmails"))),s().createElement(Fe.Z,{dimension:"small",type:"email",value:r,onChange:T(F(l)),placeholder:"me@mydomain.com"}),o&&s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},(0,C.Z)("pleaseFillEmail")),c&&s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},(0,C.Z)("invalidEmail"))))}var Be=n(84868);function We(){const[e,t]=Ae("subscriber_email_notification","enabled"),[n,a]=Ae("subscriber_email_notification","address"),r=Se("setErrorFlag"),l="1"===e&&""===n.trim(),i=n&&!w(n);return s().useEffect((()=>{r(l||i)}),[l,i,r]),s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("newSubscriberNotifsTitle"),description:(0,C.Z)("newSubscriberNotifsDescription"),htmlFor:"subscriber_email_notification-enabled"}),s().createElement(ye,null,s().createElement(Be.Z,{checked:"1"===e,value:"1",onCheck:t}),(0,C.Z)("yes")," ",s().createElement(Be.Z,{checked:""===e,value:"",onCheck:t}),(0,C.Z)("no"),s().createElement("br",null),s().createElement(Fe.Z,{dimension:"small",type:"email",value:n,onChange:T(F(a)),placeholder:"me@mydomain.com"}),l&&s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},(0,C.Z)("pleaseFillEmail")),i&&s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},(0,C.Z)("invalidEmail"))))}function $e({name:e,title:t,description:n}){const[a,r]=s().useState([]),l=`[${e}${a.length?` segments="${a.join(",")}"`:""}]`;return s().createElement(s().Fragment,null,s().createElement(fe,{title:t,description:n,htmlFor:`${e}-shortcode`}),s().createElement(ye,null,s().createElement(Fe.Z,{dimension:"small",readOnly:!0,type:"text",value:l,onClick:e=>{e.target.focus(),e.target.select()},id:`${e}-shortcode`}),s().createElement("br",null),s().createElement(we,{value:a,setValue:r,id:`${e}-shortcode-segments`,placeholder:(0,C.Z)("leaveEmptyToDisplayAll"),segmentsSelector:"getSegments"})))}function He(){return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("gdprTitle"),description:(0,C.Z)("gdprDescription"),htmlFor:"gdpr-compliant"}),s().createElement(ye,null,s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/246-guide-to-conform-to-gdpr","data-beacon-article":"5a9e8cdd04286374f7089a8c",title:(0,C.Z)("readGuide"),target:"_blank",rel:"noopener noreferrer"},(0,C.Z)("readGuide"))))}function je(){return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(De,null),s().createElement(Ue,{event:"on_comment",title:(0,C.Z)("subscribeInCommentsTitle"),description:(0,C.Z)("subscribeInCommentsDescription")}),s().createElement(Ue,{event:"on_register",title:(0,C.Z)("subscribeInRegistrationTitle"),description:(0,C.Z)("subscribeInRegistrationDescription")}),s().createElement(xe,null),s().createElement(ze,null),s().createElement(qe,null),s().createElement(We,null),s().createElement($e,{name:"mailpoet_archive",title:(0,C.Z)("archiveShortcodeTitle"),description:(0,C.Z)("archiveShortcodeDescription")}),s().createElement($e,{name:"mailpoet_subscribers_count",title:(0,C.Z)("subscribersCountShortcodeTitle"),description:(0,C.Z)("subscribersCountShortcodeDescription")}),s().createElement(He,null),s().createElement(Te,null))}function Ye(){const[e,t]=Ae("cron_trigger","method"),n=Ne("getPaths")();return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("taskCron"),description:s().createElement(s().Fragment,null,(0,C.Z)("taskCronDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/129-what-is-the-newsletter-task-scheduler","data-beacon-article":"57ce0a7a903360649f6e5703",rel:"noopener noreferrer",target:"_blank"},(0,C.Z)("readMore"))),htmlFor:"cron_trigger-method"}),s().createElement(ye,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Be.Z,{id:"cron_trigger-method-wordpress",value:"WordPress",checked:"WordPress"===e,onCheck:t,automationId:"wordress_cron_radio"}),s().createElement("label",{htmlFor:"cron_trigger-method-wordpress"},(0,C.Z)("websiteVisitors"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Be.Z,{id:"cron_trigger-method-mailpoet",value:"MailPoet",checked:"MailPoet"===e,onCheck:t,automationId:"mailpoet_cron_radio"}),s().createElement("label",{htmlFor:"cron_trigger-method-mailpoet"},Ke()((0,C.Z)("mailpoetScript"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://kb.mailpoet.com/article/131-hosts-which-mailpoet-task-scheduler-wont-work","data-beacon-article":"57ce0b05c6979108399a0456",rel:"noopener noreferrer",target:"_blank"},e))))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Be.Z,{id:"cron_trigger-method-cron",value:"Linux Cron",checked:"Linux Cron"===e,onCheck:t,automationId:"linux_cron_radio"}),s().createElement("label",{htmlFor:"cron_trigger-method-cron"},(0,C.Z)("serverCron"))),"Linux Cron"===e&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,C.Z)("addCommandToCrontab")),s().createElement(Fe.Z,{dimension:"small",type:"text",readOnly:!0,value:`php ${n.plugin}/mailpoet-cron.php ${n.root}`}),s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,C.Z)("withFrequency")),s().createElement(Fe.Z,{dimension:"small",type:"text",readOnly:!0,value:"*/1 * * * *"}))))}function Je(){const e=Ne("hasMembersPlugin")();return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("rolesTitle"),description:(0,C.Z)("rolesDescription"),htmlFor:""}),s().createElement(ye,null,s().createElement("p",null,e?s().createElement("a",{className:"mailpoet-link",href:"?page=roles"},(0,C.Z)("manageUsingMembers")):Ke()((0,C.Z)("installMembers"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://wordpress.org/plugins/members/",rel:"noopener noreferrer",target:"_blank"},e))))))}function Xe(){const[e,t]=Ae("tracking","enabled");return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("trackingTitle"),description:(0,C.Z)("trackingDescription"),htmlFor:""}),s().createElement(ye,null,s().createElement(Be.Z,{id:"tracking-enabled",value:"1",checked:"1"===e,onCheck:t,automationId:"tracking-enabled-radio"}),s().createElement("label",{htmlFor:"tracking-enabled"},(0,C.Z)("yes")),s().createElement("span",{className:"mailpoet-gap"}),s().createElement(Be.Z,{id:"tracking-disabled",value:"",checked:""===e,onCheck:t,automationId:"tracking-disabled-radio"}),s().createElement("label",{htmlFor:"tracking-disabled"},(0,C.Z)("no"))))}function Qe(){const[e]=Ae("smtp_provider"),t=Ne("isMssActive")(),[n,a]=Ae("send_transactional_emails");let r;return t?r="MailPoet Sending Service":"manual"===e?r="SMTP":"SendGrid"===e?r="SendGrid":"AmazonSES"===e?r="Amazon SES":"server"===e&&(r=(0,C.Z)("hostOption")),s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("transactionalTitle"),description:s().createElement(s().Fragment,null,(0,C.Z)("transactionalDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/292-choose-how-to-send-your-wordpress-websites-emails","data-beacon-article":"5ddbf92504286364bc9228c5",rel:"noopener noreferrer",target:"_blank"},(0,C.Z)("transactionalLink"))),htmlFor:""}),s().createElement(ye,null,s().createElement(Be.Z,{id:"transactional-enabled",value:"1",checked:"1"===n,onCheck:a}),s().createElement("label",{htmlFor:"transactional-enabled"},(0,C.Z)("transactionalCurrentMethod").replace("%1$s",r),s().createElement("br",null),s().createElement("span",{className:"mailpoet-note"},Ke()((0,C.Z)("transactionalMssNote"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://kb.mailpoet.com/article/292-choose-how-to-send-your-wordpress-websites-emails#attachments",rel:"noopener noreferrer","data-beacon-article":"5ddbf92504286364bc9228c5",target:"_blank"},e))))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Be.Z,{id:"transactional-disabled",value:"",checked:""===n,onCheck:a}),s().createElement("label",{htmlFor:"transactional-disabled"},(0,C.Z)("transactionalWP")))))}function et(){const[e,t]=Ae("deactivate_subscriber_after_inactive_days"),[n]=Ae("tracking","enabled");return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("inactiveSubsTitle"),description:s().createElement(s().Fragment,null,(0,C.Z)("inactiveSubsDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/264-inactive-subscribers","data-beacon-article":"5cbf19622c7d3a026fd3efe1",rel:"noopener noreferrer",target:"_blank"},(0,C.Z)("readMore"))),htmlFor:""}),s().createElement(ye,null,!n&&s().createElement("p",{"data-automation-id":"inactive-subscribers-disabled"},(0,C.Z)("disabledBecauseTrackingIs")),n&&s().createElement("div",{"data-automation-id":"inactive-subscribers-enabled"},s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Be.Z,{id:"inactive-subscribers-disabled",automationId:"inactive-subscribers-option-never",value:"",checked:""===e,onCheck:t}),s().createElement("label",{htmlFor:"inactive-subscribers-disabled"},(0,C.Z)("never"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Be.Z,{id:"inactive-subscribers-3-months",value:"90",checked:"90"===e,onCheck:t}),s().createElement("label",{htmlFor:"inactive-subscribers-3-months"},(0,C.Z)("after3months"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Be.Z,{id:"inactive-subscribers-6-months",value:"180",checked:"180"===e,onCheck:t,automationId:"inactive-subscribers-default"}),s().createElement("label",{htmlFor:"inactive-subscribers-6-months"},(0,C.Z)("after6months"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Be.Z,{id:"inactive-subscribers-12-months",value:"365",checked:"365"===e,onCheck:t}),s().createElement("label",{htmlFor:"inactive-subscribers-12-months"},(0,C.Z)("after12months"))))))}function tt(){const[e,t]=Ae("analytics","enabled"),[,n]=Ae("3rd_party_libs","enabled");return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("shareDataTitle"),description:s().createElement(s().Fragment,null,(0,C.Z)("shareDataDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/130-sharing-your-data-with-us","data-beacon-article":"57ce0aaac6979108399a0454",rel:"noopener noreferrer",target:"_blank"},(0,C.Z)("readMore"))),htmlFor:""}),s().createElement(ye,null,s().createElement(Be.Z,{id:"share-data-enabled",value:"1",checked:"1"===e,onCheck:()=>{t("1"),n("1")},automationId:"analytics-yes"}),s().createElement("label",{htmlFor:"share-data-enabled"},(0,C.Z)("yes")),s().createElement("span",{className:"mailpoet-gap"}),s().createElement(Be.Z,{id:"share-data-disabled",value:"",checked:""===e,onCheck:t,automationId:"analytics-no"}),s().createElement("label",{htmlFor:"share-data-disabled"},(0,C.Z)("no"))))}$e.propTypes={name:Re().oneOf(["mailpoet_archive","mailpoet_subscribers_count"]).isRequired,title:Re().string.isRequired,description:Re().string.isRequired};const nt=()=>{const[e,t]=Ae("3rd_party_libs","enabled"),[,n]=Ae("analytics","enabled");return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("libs3rdPartyTitle"),description:s().createElement(s().Fragment,null,(0,C.Z)("libs3rdPartyDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/338-what-3rd-party-libraries-we-use","data-beacon-article":"5f7c7dd94cedfd0017dcece8",rel:"noopener noreferrer",target:"_blank"},(0,C.Z)("readMore"))),htmlFor:""}),s().createElement(ye,null,s().createElement(Be.Z,{id:"libs-3rd-party-enabled",value:"1",checked:"1"===e,onCheck:t}),s().createElement("label",{htmlFor:"libs-3rd-party-enabled"},(0,C.Z)("yes")),s().createElement("span",{className:"mailpoet-gap"}),s().createElement(Be.Z,{id:"libs-3rd-party-disabled",value:"",checked:""===e,onCheck:()=>{t(""),n("")}}),s().createElement("label",{htmlFor:"libs-3rd-party-disabled"},(0,C.Z)("no"))))};function at(){const[e,t]=Ae("captcha","type"),[n,a]=Ae("captcha","recaptcha_site_token"),[r,l]=Ae("captcha","recaptcha_secret_token"),i=Ne("isBuiltInCaptchaSupported")(),o=Se("setErrorFlag"),c="recaptcha"===e&&""===n.trim(),m="recaptcha"===e&&""===r.trim();return s().useEffect((()=>{o(c||m)}),[m,c,o]),s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("captchaTitle"),description:s().createElement(s().Fragment,null,(0,C.Z)("captchaDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://www.google.com/recaptcha/admin",rel:"noopener noreferrer",target:"_blank"},(0,C.Z)("signupForCaptchaKey"))),htmlFor:""}),s().createElement(ye,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Be.Z,{id:"built-in-captcha",disabled:!i,value:"built-in",checked:"built-in"===e,onCheck:t}),s().createElement("label",{htmlFor:"built-in-captcha"},(0,C.Z)("builtInCaptcha")," ",!i&&(0,C.Z)("disbaledBecauseExtensionMissing"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Be.Z,{id:"google-captcha",value:"recaptcha",checked:"recaptcha"===e,onCheck:t}),s().createElement("label",{htmlFor:"google-captcha"},(0,C.Z)("googleReCaptcha"))),"recaptcha"===e&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Fe.Z,{dimension:"small",type:"text",value:n,onChange:T(a),placeholder:(0,C.Z)("yourReCaptchaKey")}),c&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,C.Z)("fillReCaptchaKeys")),s().createElement("br",null),s().createElement(Fe.Z,{dimension:"small",type:"text",value:r,onChange:T(l),placeholder:(0,C.Z)("yourReCaptchaSecret")}),m&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,C.Z)("fillReCaptchaKeys"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Be.Z,{id:"no-captcha",value:"",checked:""===e,onCheck:t}),s().createElement("label",{htmlFor:"no-captcha"},(0,C.Z)("disable")))))}function rt(){const e=Se("reinstall"),{notices:t}=s().useContext(m.k);return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("reinstallTitle"),description:(0,C.Z)("reinstallDescription"),htmlFor:""}),s().createElement(ye,null,s().createElement(Ze.Z,{type:"button",onClick:async()=>{if(window.confirm((0,C.Z)("reinstallConfirmation"))){const n=await e();"SAVE_FAILED"===n.type?t.error(n.error.map((e=>s().createElement("p",null,e))),{scroll:!0}):window.location.href="admin.php?page=mailpoet-newsletters"}},automationId:"reinstall-button",variant:"destructive"},(0,C.Z)("reinstallNow"))))}function lt(){const e=Se("recalculateSubscribersScore"),{notices:t}=s().useContext(m.k);return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("recalculateSubscribersScoreTitle"),description:(0,C.Z)("recalculateSubscribersScoreDescription"),htmlFor:""}),s().createElement(ye,null,s().createElement(Ze.Z,{type:"button",onClick:async()=>{await e(),t.info(s().createElement("p",null,(0,C.Z)("recalculateSubscribersScoreNotice")),{scroll:!0})},variant:"secondary",dimension:"small"},(0,C.Z)("recalculateSubscribersScoreNow"))))}function it(){const[e,t]=Ae("logging");return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("loggingTitle"),description:s().createElement(s().Fragment,null,(0,C.Z)("loggingDescription")," ",s().createElement("a",{href:"?page=mailpoet-logs",className:"mailpoet-link"},(0,C.Z)("loggingDescriptionLink"))),htmlFor:"logging-level"}),s().createElement(ye,null,s().createElement(Me.Z,{id:"logging-level",value:e,onChange:T(t),automationId:"logging-select-box",isMinWidth:!0,dimension:"small"},s().createElement("option",{value:"everything","data-automation-id":"log-everything"},(0,C.Z)("everythingLogOption")),s().createElement("option",{value:"errors","data-automation-id":"log-errors"},(0,C.Z)("errorsLogOption")),s().createElement("option",{value:"nothing","data-automation-id":"log-nothing"},(0,C.Z)("nothingLogOption")))))}function st(){const[e,t]=Ae("bounce","address");return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("bounceEmail"),description:s().createElement(s().Fragment,null,(0,C.Z)("yourBouncedEmails")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/180-how-bounce-management-works-in-mailpoet-3","data-beacon-article":"58a5a7502c7d3a576d353c78",rel:"noopener noreferrer",target:"_blank"},(0,C.Z)("readMore"))),htmlFor:"bounce-address"}),s().createElement(ye,null,s().createElement(Fe.Z,{dimension:"small",type:"text",id:"bounce-address",placeholder:"bounce@mydomain.com","data-automation-id":"bounce-address-field",value:e,onChange:T(F(t))})))}function ot(){return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(st,null),s().createElement(Ye,null),s().createElement(Je,null),s().createElement(Xe,null),s().createElement(Qe,null),s().createElement(lt,null),s().createElement(et,null),s().createElement(tt,null),s().createElement(nt,null),s().createElement(at,null),s().createElement(rt,null),s().createElement(it,null),s().createElement(Te,null))}var ct=n(13651);const mt=()=>s().createElement("div",{className:"mailpoet_success_item mailpoet_success_item mailpoet_success"},p.Z.I18n.t("premiumTabKeyValidMessage")),ut=()=>s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},p.Z.I18n.t("premiumTabKeyNotValidMessage"));function pt(){const{isKeyValid:e}=Ne("getKeyActivationState")();return e?s().createElement(mt,null):s().createElement(ut,null)}const dt=()=>s().createElement("div",{className:"mailpoet_success_item mailpoet_success mailpoet_mss_key_valid"},p.Z.I18n.t("premiumTabMssActiveMessage")),Et=({message:e})=>s().createElement("div",{className:"mailpoet_error"},e||p.Z.I18n.t("premiumTabMssKeyNotValidMessage"));Et.propTypes={message:Re().string},Et.defaultProps={message:""};const _t=({activationCallback:e})=>s().createElement("div",{className:"mailpoet_error"},p.Z.I18n.t("premiumTabMssNotActiveMessage")," ",s().createElement("button",{type:"button",className:"mailpoet-button button button-primary button-small",onClick:e},p.Z.I18n.t("premiumTabMssActivateMessage")));function gt(e){const{mssStatus:t}=Ne("getKeyActivationState")();switch(t){case E.VALID_MSS_ACTIVE:return s().createElement(dt,null);case E.VALID_MSS_NOT_ACTIVE:return s().createElement(_t,{activationCallback:e.activationCallback});case E.INVALID:return s().createElement(Et,{message:e.keyMessage});default:return null}}_t.propTypes={activationCallback:Re().func.isRequired},gt.propTypes={keyMessage:Re().string,activationCallback:Re().func.isRequired},gt.defaultProps={keyMessage:""};const bt=()=>s().createElement("div",{className:"mailpoet_success_item mailpoet_success"},p.Z.I18n.t("premiumTabPremiumActiveMessage")),ht=e=>s().createElement(s().Fragment,null,s().createElement("div",{className:"mailpoet_error mailpoet_install_premium_message"},p.Z.I18n.t("premiumTabPremiumNotInstalledMessage")),e.url&&s().createElement(Ze.Z,{href:e.url},p.Z.I18n.t("premiumTabPremiumDownloadMessage")));ht.propTypes={url:Re().string};const vt=({message:e})=>s().createElement("div",{className:"mailpoet_error"},e||p.Z.I18n.t("premiumTabPremiumKeyNotValidMessage"));function ft(e){const{premiumStatus:t,downloadUrl:n}=Ne("getKeyActivationState")();switch(t){case d.VALID_PREMIUM_PLUGIN_ACTIVE:return s().createElement(s().Fragment,null,s().createElement(bt,null));case d.VALID_PREMIUM_PLUGIN_NOT_ACTIVE:return s().createElement(s().Fragment,null,s().createElement(ht,{url:n}));case d.INVALID:return s().createElement(s().Fragment,null,s().createElement(vt,{message:e.keyMessage}));default:return null}}function yt(){return s().createElement(s().Fragment,null,s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},p.Z.I18n.t("premiumTabKeyCannotValidate"),s().createElement("ul",{className:"disc-inside-list"},s().createElement("li",null,p.Z.I18n.t("premiumTabKeyCannotValidateLocalhost")),s().createElement("li",null,p.Z.I18n.t("premiumTabKeyCannotValidateBlockingHost")),s().createElement("li",null,p.Z.I18n.t("premiumTabKeyCannotValidateIntranet"))),s().createElement("p",null,s().createElement("a",{href:"https://kb.mailpoet.com/article/319-known-errors-when-validating-a-mailpoet-key",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"5ef1da9d2c7d3a10cba966c5",className:"mailpoet_error"},p.Z.I18n.t("learnMore")))))}function Zt(){const{notices:e}=(0,i.useContext)(m.k),t=Ne("getKeyActivationState")(),n=Se("updateKeyActivationState"),a=Se("verifyMssKey"),r=Se("verifyPremiumKey"),l=Se("sendCongratulatoryMssEmail"),[o,c]=Ae("sender","address"),[u,d]=Ae("authorized_emails_addresses_check"),[_]=Ae("mta","mailpoet_api_key_state","data"),g=t.fromAddressModalCanBeShown&&t.mssStatus===E.VALID_MSS_ACTIVE&&(!o||u),b=!1===t.inProgress&&t.mssStatus===E.VALID_MSS_ACTIVE&&_&&!1===_.is_approved;return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(fe,{htmlFor:"mailpoet_premium_key",title:(0,C.Z)("premiumTabActivationKeyLabel"),description:(0,C.Z)("premiumTabDescription")}),s().createElement(ye,null,s().createElement(Fe.Z,{type:"text",id:"mailpoet_premium_key",name:"premium[premium_key]",value:t.key||"",onChange:e=>n({mssStatus:null,premiumStatus:null,premiumInstallationStatus:null,key:e.target.value.trim()||null})}),s().createElement(Ze.Z,{type:"button",onClick:async()=>{t.key?(await n({mssStatus:null,premiumStatus:null,premiumInstallationStatus:null}),p.Z.Modal.loading(!0),n({inProgress:!0}),await a(t.key),await l(),await r(t.key),n({inProgress:!1}),p.Z.Modal.loading(!1),n({fromAddressModalCanBeShown:!0})):e.error(s().createElement("p",null,(0,C.Z)("premiumTabNoKeyNotice")),{scroll:!0})}},(0,C.Z)("premiumTabVerifyButton")),null!==t.isKeyValid&&(503===t.code?s().createElement("div",{className:"key-activation-messages"},s().createElement(yt,null)):s().createElement("div",{className:"key-activation-messages"},s().createElement(pt,null),null!==t.mssStatus&&s().createElement(gt,{keyMessage:t.mssMessage,activationCallback:async()=>{await a(t.key),l(),n({fromAddressModalCanBeShown:!0})}}),t.congratulatoryMssEmailSentTo&&s().createElement("div",{className:"mailpoet_success_item mailpoet_success"},(0,C.Z)("premiumTabCongratulatoryMssEmailSent").replace("[email_address]",t.congratulatoryMssEmailSentTo)),null!==t.premiumStatus&&s().createElement(ft,{keyMessage:t.premiumMessage}),b&&s().createElement("div",{className:"mailpoet_success"},s().createElement("div",{className:"pending_approval_heading"},(0,C.Z)("premiumTabPendingApprovalHeading")),s().createElement("div",null,(0,C.Z)("premiumTabPendingApprovalMessage"))),!t.isKeyValid&&s().createElement("p",null,s().createElement("a",{href:"https://kb.mailpoet.com/article/319-known-errors-when-validating-a-mailpoet-key",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"5ef1da9d2c7d3a10cba966c5",className:"mailpoet_error"},p.Z.I18n.t("learnMore")))))),g&&s().createElement(ct.Z,{onRequestClose:()=>{n({fromAddressModalCanBeShown:!1}),l()},setAuthorizedAddress:async e=>{await c(e),await d(null)}}))}vt.propTypes={message:Re().string},vt.defaultProps={message:""},ft.propTypes={keyMessage:Re().string},ft.defaultProps={keyMessage:""};var kt=n(5977),St=n(73727);function It(){const e=(0,kt.useHistory)(),t=Ne("isMssActive")(),[n]=Ae("mta","mailpoet_api_key"),{mssStatus:a,premiumStatus:r}=Ne("getKeyActivationState")(),l=null!==a&&a!==E.INVALID,i=null!==r&&r!==d.INVALID,o=window.mailpoet_free_plan_url,c=Se("setSetting"),m=Se("saveSettings");return s().createElement("ul",{className:"mailpoet-sending-methods"},s().createElement("li",null,s().createElement("label",{className:"mailpoet-sending-method mailpoet-form-checkbox"},s().createElement("input",{type:"radio",checked:t,onChange:async a=>{a.preventDefault(),t||l||e.push("/premium"),!t&&l&&await(async()=>(await c(["mta_group"],"mailpoet"),await c(["mta","method"],"MailPoet"),await c(["mta","mailpoet_api_key"],n),await c(["signup_confirmation","enabled"],"1"),m()))()}}),s().createElement("span",{className:"mailpoet-form-radio-control"}),s().createElement("h4",{className:"mailpoet-h4"},(0,C.Z)("mssTitle")),s().createElement("p",null,t?(0,C.Z)("youreSendingWithMss"):(0,C.Z)("solveSendingProblems")),s().createElement("ul",{className:"mailpoet-sending-method-benefits mailpoet_success"},s().createElement("li",{className:"mailpoet_success_item"},(0,C.Z)("mssBenefit1")),s().createElement("li",{className:"mailpoet_success_item"},(0,C.Z)("mssBenefit2")),s().createElement("li",{className:"mailpoet_success_item"},(0,C.Z)("mssBenefit3")),s().createElement("li",{className:"mailpoet_success_item"},(0,C.Z)("mssBenefit4")),s().createElement("li",{className:"mailpoet_success_item"},(0,C.Z)("mssBenefit5"))),!l&&!i&&s().createElement("div",{className:"mailpoet-sending-method-actions"},s().createElement("a",{className:"mailpoet-button button-primary",href:o,rel:"noopener noreferrer",target:"_blank"},(0,C.Z)("freeUpto")),s().createElement("span",null," ",(0,C.Z)("or")," "),Ke()((0,C.Z)("enterYourKey"),/\[link\](.*?)\[\/link\]/g,((e,t)=>s().createElement(St.rU,{key:t,to:"/premium",className:"mailpoet-link"},e)))),!l&&i&&s().createElement("div",{className:"mailpoet-sending-method-actions"},s().createElement("i",null,(0,C.Z)("invalidKeyForMss"))," ",s().createElement("a",{className:"mailpoet-button button-primary",href:"https://account.mailpoet.com/",rel:"noopener noreferrer",target:"_blank"},(0,C.Z)("getPlan"))))),s().createElement("li",null,s().createElement("label",{className:"mailpoet-sending-method mailpoet-form-checkbox"},s().createElement("input",{type:"radio",checked:!t,onChange:t=>{t.preventDefault(),e.push("/mta/other")}}),s().createElement("span",{className:"mailpoet-form-radio-control"}),s().createElement("h4",{className:"mailpoet-h4"},(0,C.Z)("otherTitle")),s().createElement("p",null,(0,C.Z)("sendViaHost")," ",s().createElement("strong",null,(0,C.Z)("notRecommended"))," ",(0,C.Z)("orViaThirdParty")),s().createElement("div",{className:"mailpoet-sending-method-actions"},s().createElement(St.rU,{to:"/mta/other",className:"mailpoet-link"},(0,C.Z)("configure"))))))}function Nt(){const[e,t]=Ae("smtp_provider"),[,n]=Ae("mta_group"),[,a]=Ae("mta","method");return s().useEffect((()=>{switch(e){case"server":n("website"),a("PHPMail");break;case"manual":n("smtp"),a("SMTP");break;case"AmazonSES":n("smtp"),a("AmazonSES");break;case"SendGrid":n("smtp"),a("SendGrid");break;default:a("PHPMail")}}),[e,n,a]),s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("method"),htmlFor:"mailpoet_smtp_method"}),s().createElement(ye,null,s().createElement(Me.Z,{id:"mailpoet_smtp_method",value:e,onChange:T(t),isMinWidth:!0,dimension:"small"},s().createElement("option",{value:"server"},(0,C.Z)("hostOption")),s().createElement("option",{value:"manual"},(0,C.Z)("smtpOption")),s().createElement("optgroup",{label:(0,C.Z)("selectProvider")},s().createElement("option",{value:"AmazonSES"},"Amazon SES"),s().createElement("option",{value:"SendGrid"},"SendGrid")))))}function At(){return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("spfTitle"),description:(0,C.Z)("spfDescription"),htmlFor:""}),s().createElement(ye,null,(0,C.Z)("spfSetup")))}var Tt=n(83213),Ct=n(38287);function wt(){const[e,t]=s().useState(window.mailpoet_current_user_email),[n]=Ae("mta"),{state:a,error:r}=Ne("getTestEmailState")(),l=Se("sendTestEmail");return s().createElement(s().Fragment,null,a===g.SENDING&&s().createElement(ge.Z,null),a===g.SUCCESS&&s().createElement(Ct.Z,{type:"success",scroll:!0},s().createElement("p",null,(0,C.Z)("emailSent"))),a===g.FAILURE&&s().createElement(Ct.Z,{type:"error",scroll:!0},s().createElement("p",null,r.map((e=>s().createElement("p",{key:e},e))))),s().createElement(fe,{title:(0,C.Z)("testSending"),htmlFor:"mailpoet_mta_test_email"}),s().createElement(ye,null,s().createElement(Fe.Z,{dimension:"small",type:"text",id:"mailpoet_mta_test_email",value:e,onChange:T(t)}),s().createElement(Ze.Z,{type:"button",dimension:"small",variant:"secondary",onClick:()=>l(e,n)},(0,C.Z)("sendTestEmail")),s().createElement(Tt.default,{tooltipId:"tooltip-settings-test",className:"mailpoet_tooltip_icon",tooltip:s().createElement("span",{style:{pointerEvents:"all"}},Ke()((0,C.Z)("testEmailTooltip"),/\[link\](.*?)\[\/link\]/g,((e,t)=>s().createElement("a",{className:"mailpoet-link",key:t,target:"_blank",rel:"noopener noreferrer","data-beacon-article":"580846f09033604df5166ed1",href:"https://kb.mailpoet.com/article/146-my-newsletters-are-not-being-received"},e))))})))}function Mt(){const e=Se("saveSettings"),t=Se("loadSettings"),n=(0,kt.useHistory)();return s().createElement("div",{className:"mailpoet-settings-save"},s().createElement(Ze.Z,{type:"button",onClick:async()=>{await e(),n.push("/mta")}},(0,C.Z)("activate")),s().createElement(Ze.Z,{onClick:async()=>{p.Z.Modal.loading(!0),await t(),n.push("/mta"),p.Z.Modal.loading(!1)},variant:"tertiary"},(0,C.Z)("orCancel")))}function Lt({recommendedEmails:e,recommendedInterval:t}){const[n,a]=Ae("mailpoet_sending_frequency"),[r,l]=Ae("mta","frequency","emails"),[i,o]=Ae("mta","frequency","interval");s().useEffect((()=>{"auto"===n&&(l(`${e}`),o(`${t}`))}),[n,e,t,l,o]);const c=Math.floor(1440*parseInt(r,10)/parseInt(i,10)),m=Math.floor(c/86400*10)/10;return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("sendingFrequency"),htmlFor:"mailpoet_sending_frequency"}),s().createElement(ye,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Me.Z,{id:"mailpoet_sending_frequency",value:n,onChange:T(a),dimension:"small"},s().createElement("option",{value:"auto"},(0,C.Z)("recommendedTitle")),s().createElement("option",{value:"manual"},(0,C.Z)("ownFrequency")))),"manual"===n&&s().createElement(s().Fragment,null,s().createElement("div",{className:"mailpoet-settings-inputs-row mailpoet-settings-inputs-row-centered"},s().createElement(Fe.Z,{dimension:"small",id:"other_frequency_emails",type:"number",min:"1",max:"1000",value:r,onChange:T(l)}),s().createElement("span",{className:"mailpoet-gap"}),s().createElement("span",null,(0,C.Z)("emails"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Me.Z,{id:"other_frequency_interval",value:i,onChange:T(o),dimension:"small"},s().createElement("option",{value:"1"},"every minute"),s().createElement("option",{value:"2"},"every 2 minutes"),s().createElement("option",{value:"5"},"every 5 minutes (recommended)"),s().createElement("option",{value:"10"},"every 10 minutes"),s().createElement("option",{value:"15"},"every 15 minutes"),s().createElement("option",{value:"30"},"every 30 minutes")))),"auto"===n&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,C.Z)("xEmails").replace("%1$s",r)," ",function(e){const t=Math.floor(parseInt(e,10));return t>60?(0,C.Z)("everyHours").replace("%1$d",""+t/60):60===t?(0,C.Z)("everyHour"):t>1?(0,C.Z)("everyMinutes").replace("%1$d",`${t}`):(0,C.Z)("everyMinute")}(i),". "),s().createElement("div",{className:"mailpoet-settings-inputs-row"},Ke()((0,C.Z)("thatsXEmailsPerDay").replace("%1$s",c.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>s().createElement("strong",{key:t},e)))),m>1&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement("span",{className:"mailpoet_emails_per_second_warning"},Ke()((0,C.Z)("thatsXEmailsPerSecond").replace("%1$s",m.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>s().createElement("strong",{key:t},e))))),"manual"===n&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},Ke()((0,C.Z)("frequencyWarning").replace("%1$s",m.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>s().createElement("strong",{key:t},e))))))}function Ft(){const[e,t]=Ae("web_host"),n=Ne("getWebHosts")(),a=n[e];return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("yourHost"),htmlFor:"mailpoet_web_host"}),s().createElement(ye,null,s().createElement(Me.Z,{id:"mailpoet_web_host",value:e,onChange:T(t),isMinWidth:!0,dimension:"small"},Object.entries(n).map((([e,t])=>s().createElement("option",{key:e,value:e},t.name))))),s().createElement(Lt,{recommendedEmails:a.emails,recommendedInterval:a.interval}))}function Pt(){const[e,t]=Ae("mta","host"),[n,a]=Ae("mta","port"),[r,l]=Ae("mta","login"),[i,o]=Ae("mta","password"),[c,m]=Ae("mta","encryption"),[u,p]=Ae("mta","authentication");return s().createElement(s().Fragment,null,s().createElement(Lt,{recommendedEmails:100,recommendedInterval:5}),s().createElement(fe,{title:(0,C.Z)("smtpHost"),description:(0,C.Z)("smtpHostExample"),htmlFor:"mailpoet_smtp_host"}),s().createElement(ye,null,s().createElement(Fe.Z,{dimension:"small",type:"text",id:"mailpoet_smtp_host",value:e,onChange:T(t)})),s().createElement(fe,{title:(0,C.Z)("smtpPort"),htmlFor:"mailpoet_smtp_port"}),s().createElement(ye,null,s().createElement(Fe.Z,{dimension:"small",type:"text",id:"mailpoet_smtp_port",value:n,onChange:T(a)})),s().createElement(fe,{title:(0,C.Z)("login"),htmlFor:"mailpoet_smtp_login"}),s().createElement(ye,null,s().createElement(Fe.Z,{dimension:"small",type:"text",id:"mailpoet_smtp_login",value:r,onChange:T(l)})),s().createElement(fe,{title:(0,C.Z)("password"),htmlFor:"mailpoet_smtp_password"}),s().createElement(ye,null,s().createElement(Fe.Z,{dimension:"small",type:"password",id:"mailpoet_smtp_password",value:i,onChange:T(o)})),s().createElement(fe,{title:(0,C.Z)("secureConnectioon"),htmlFor:"mailpoet_smtp_encryption"}),s().createElement(ye,null,s().createElement(Me.Z,{id:"mailpoet_smtp_encryption",value:c,onChange:T(m),isMinWidth:!0,dimension:"small"},s().createElement("option",{value:""},(0,C.Z)("no")),s().createElement("option",{value:"ssl"},"SSL"),s().createElement("option",{value:"tls"},"TLS"))),s().createElement(fe,{title:(0,C.Z)("authentication"),description:(0,C.Z)("authenticationDescription"),htmlFor:"mailpoet_smtp_authentication"}),s().createElement(ye,null,s().createElement(Be.Z,{value:"1",checked:"1"===u,onCheck:p}),(0,C.Z)("yes")," ",s().createElement(Be.Z,{value:"-1",checked:"-1"===u,onCheck:p}),(0,C.Z)("no")))}function Dt(){const[e,t]=Ae("mta","region"),[n,a]=Ae("mta","access_key"),[r,l]=Ae("mta","secret_key"),i=Ne("getAmazonSesOptions")();return s().createElement(s().Fragment,null,s().createElement(Lt,{recommendedEmails:i.emails,recommendedInterval:i.interval}),s().createElement(fe,{title:(0,C.Z)("region"),htmlFor:"mailpoet_amazon_ses_region"}),s().createElement(ye,null,s().createElement(Me.Z,{id:"mailpoet_amazon_ses_region",value:e,onChange:T(t),isMinWidth:!0,dimension:"small"},Object.entries(i.regions).map((([e,t])=>s().createElement("option",{key:t,value:t},e))))),s().createElement(fe,{title:(0,C.Z)("accessKey"),htmlFor:"mailpoet_amazon_ses_access_key"}),s().createElement(ye,null,s().createElement(Fe.Z,{dimension:"small",type:"text",value:n,className:"regular-text",onChange:T(a),id:"mailpoet_amazon_ses_access_key"})),s().createElement(fe,{title:(0,C.Z)("secretKey"),htmlFor:"mailpoet_amazon_ses_secret_key"}),s().createElement(ye,null,s().createElement(Fe.Z,{dimension:"small",type:"text",value:r,className:"regular-text",onChange:T(l),id:"mailpoet_amazon_ses_secret_key"})))}function Vt(){const[e,t]=Ae("mta","api_key"),n=Ne("getSendGridOptions")();return s().createElement(s().Fragment,null,s().createElement(Lt,{recommendedEmails:n.emails,recommendedInterval:n.interval}),s().createElement(fe,{title:(0,C.Z)("apiKey"),htmlFor:"mailpoet_sendgrid_api_key"}),s().createElement(ye,null,s().createElement(Fe.Z,{dimension:"small",type:"text",value:e,onChange:T(t),id:"mailpoet_sendgrid_api_key"})))}function Rt(){const[e]=Ae("mta","method");return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(Nt,null),"PHPMail"===e&&s().createElement(Ft,null),"SMTP"===e&&s().createElement(Pt,null),"AmazonSES"===e&&s().createElement(Dt,null),"SendGrid"===e&&s().createElement(Vt,null),s().createElement(At,null),s().createElement(wt,null),s().createElement(Mt,null))}function Ot(){const{subPage:e}=(0,kt.useParams)();return"other"===e?s().createElement(Rt,null):s().createElement(It,null)}function Ut(){const e=Ne("isMssActive")(),[t,n]=Ae("signup_confirmation","enabled"),a=e=>{"1"===e&&window.confirm((0,C.Z)("subscribersNeedToActivateSub"))&&n("1"),""===e&&window.confirm((0,C.Z)("newSubscribersAutoConfirmed"))&&n("")};return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("enableSignupConfTitle"),description:s().createElement(s().Fragment,null,(0,C.Z)("enableSignupConfDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/128-why-you-should-use-signup-confirmation-double-opt-in","data-beacon-article":"57ce097f903360649f6e5700",rel:"noopener noreferrer",target:"_blank"},(0,C.Z)("readAboutDoubleOptIn"))),htmlFor:"signup_confirmation-enabled"}),s().createElement(ye,null,e?s().createElement("p",null,(0,C.Z)("signupConfirmationIsMandatory")):s().createElement(s().Fragment,null,s().createElement(Be.Z,{id:"signup_confirmation-enabled",checked:"1"===t,value:"1",onCheck:a,automationId:"enable_signup_confirmation"}),(0,C.Z)("yes")," ",s().createElement(Be.Z,{checked:""===t,value:"",onCheck:a,automationId:"disable_signup_confirmation"}),(0,C.Z)("no"))))}function Gt(){const[e]=Ae("signup_confirmation","enabled"),[t,n]=Ae("signup_confirmation","subject");return e?s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("emailSubject"),htmlFor:"signup_confirmation-subject"}),s().createElement(ye,null,s().createElement(Fe.Z,{dimension:"small",type:"text",size:50,id:"signup_confirmation-subject","data-automation-id":"signup_confirmation_email_subject",value:t,onChange:T(n)}))):null}Lt.propTypes={recommendedEmails:Re().number.isRequired,recommendedInterval:Re().number.isRequired};var Kt=n(97972);function xt(){const[e]=Ae("signup_confirmation","enabled"),[t,n]=Ae("signup_confirmation","body");if(!e)return null;const a=(0,C.Z)("emailContentDescription").split("<br />").filter((e=>e));return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("emailContent"),description:a.map((e=>s().createElement("span",{key:e},e,s().createElement("br",null),s().createElement("br",null)))),htmlFor:"signup_confirmation-body"}),s().createElement(ye,null,s().createElement(Kt.Z,{id:"signup_confirmation-body",cols:50,rows:15,"data-automation-id":"signup_confirmation_email_body",value:t,onChange:T(n)})))}function zt(){const[e]=Ae("signup_confirmation","enabled"),[t,n]=Ae("subscription","pages","confirmation");return e?s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("confirmationPage"),description:(0,C.Z)("confirmationPageDescription"),htmlFor:"subscription-pages-confirmation"}),s().createElement(ye,null,s().createElement(Le,{value:t,preview:"confirm",setValue:n,id:"subscription-pages-confirmation",automationId:"page_selection",linkAutomationId:"preview_page_link"}))):null}function qt(){return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(Ut,null),s().createElement(Gt,null),s().createElement(xt,null),s().createElement(zt,null),s().createElement(Te,null))}function Bt(){const[e,t]=Ae("woocommerce","use_mailpoet_editor"),[n]=Ae("woocommerce","transactional_email_id"),a=Se("openWoocommerceCustomizer");return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("wcCustomizerTitle"),description:(0,C.Z)("wcCustomizerDescription"),htmlFor:"mailpoet_wc_customizer"}),s().createElement(ye,null,s().createElement(Oe.Z,{id:"mailpoet_wc_customizer",automationId:"mailpoet_wc_customizer",checked:"1"===e,onCheck:e=>t(e?"1":"")}),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ze.Z,{type:"button",onClick:()=>a(n),variant:"secondary",dimension:"small"},(0,C.Z)("openTemplateEditor")))))}function Wt(){const[e,t]=Ae("woocommerce","optin_on_checkout","enabled"),[n,a]=Ae("woocommerce","optin_on_checkout","segments"),[r,l]=Ae("woocommerce","optin_on_checkout","message"),i=Se("setErrorFlag"),o=""===r.trim();return s().useEffect((()=>{i(o)}),[o,i]),s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("wcOptinTitle"),description:(0,C.Z)("wcOptinDescription"),htmlFor:"mailpoet_wc_checkout_optin"}),s().createElement(ye,null,s().createElement(Oe.Z,{id:"mailpoet_wc_checkout_optin",automationId:"mailpoet_wc_checkout_optin",checked:"1"===e,onCheck:e=>t(e?"1":"")}),"1"===e&&s().createElement(s().Fragment,null,s().createElement("br",null),s().createElement("label",{htmlFor:"mailpoet_wc_checkout_optin_segments"},(0,C.Z)("wcOptinSegmentsTitle"),s().createElement("br",null),s().createElement("span",null,(0,C.Z)("leaveEmptyToSubscribeToWCCustomers"))),s().createElement("br",null),s().createElement(we,{id:"mailpoet_wc_checkout_optin_segments",value:n,setValue:a,placeholder:(0,C.Z)("wcOptinSegmentsPlaceholder")}))),"1"===e&&s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("wcOptinMsgTitle"),description:(0,C.Z)("wcOptinMsgDescription"),htmlFor:"mailpoet_wc_checkout_optin_message"}),s().createElement(ye,null,s().createElement(Fe.Z,{dimension:"small",type:"text",id:"mailpoet_wc_checkout_optin_message","data-automation-id":"mailpoet_wc_checkout_optin_message",value:r,onChange:T(l),placeholder:(0,C.Z)("wcOptinMsgPlaceholder")}),s().createElement("br",null),o&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,C.Z)("wcOptinMsgCannotBeEmpty")))))}function $t(){const[e,t]=Ae("mailpoet_subscribe_old_woocommerce_customers","enabled");return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("subscribeOldWCTitle"),description:(0,C.Z)("subscribeOldWCDescription"),htmlFor:"mailpoet_subscribe_old_wc_customers"}),s().createElement(ye,null,s().createElement(Oe.Z,{id:"mailpoet_subscribe_old_wc_customers",automationId:"mailpoet_subscribe_old_wc_customers",checked:"1"===e,onCheck:e=>t(e?"1":"")})))}function Ht(){const[e,t]=Ae("woocommerce","accept_cookie_revenue_tracking","enabled");return s().createElement(s().Fragment,null,s().createElement(fe,{title:(0,C.Z)("enableCookiesTitle"),description:(0,C.Z)("enableCookiesDescription"),htmlFor:"mailpoet_accept_cookie_revenue_tracking"}),s().createElement(ye,null,s().createElement(Oe.Z,{id:"mailpoet_accept_cookie_revenue_tracking",automationId:"accept_cookie_revenue_tracking",checked:"1"===e,onCheck:e=>t(e?"1":"")})))}function jt(){return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(Bt,null),s().createElement(Wt,null),s().createElement($t,null),s().createElement(Ht,null),s().createElement(Te,null))}function Yt(){const e=Ne("isSaving")(),t=Ne("hasWooCommerce")();return s().createElement(s().Fragment,null,s().createElement(ve.D,null),e&&s().createElement(ge.Z,null),s().createElement(_e.Z,null),s().createElement(be.Z,{activeKey:"basics",onSwitch:e=>(e=>{p.Z.trackEvent("User has clicked a tab in Settings",{"MailPoet Free version":p.Z.version,"Tab ID":e})})(e)},s().createElement(he.Z,{key:"basics",title:(0,C.Z)("basicsTab"),automationId:"basic_settings_tab"},s().createElement(je,null)),s().createElement(he.Z,{key:"signup",title:(0,C.Z)("signupConfirmationTab"),automationId:"signup_settings_tab"},s().createElement(qt,null)),s().createElement(he.Z,{key:"mta",route:"mta/:subPage?",title:(0,C.Z)("sendWithTab"),automationId:"send_with_settings_tab"},s().createElement(Ot,null)),t&&s().createElement(he.Z,{key:"woocommerce",title:(0,C.Z)("wooCommerceTab"),automationId:"woocommerce_settings_tab"},s().createElement(jt,null)),s().createElement(he.Z,{key:"advanced",title:(0,C.Z)("advancedTab"),automationId:"settings-advanced-tab"},s().createElement(ot,null)),s().createElement(he.Z,{key:"premium",title:(0,C.Z)("keyActivationTab"),automationId:"activation_settings_tab"},s().createElement(Zt,null))))}const Jt=()=>s().createElement(m.k.Provider,{value:(0,m.S)(window)},s().createElement(Yt,null)),Xt=document.getElementById("settings_container");Xt&&((e=>{(0,u.R9)(Ee,{reducer:pe(de(e)),actions:a,selectors:r,controls:l,resolvers:{}})})(window),c().render(s().createElement(Jt,null),Xt))},65311:function(e){e.exports=jQuery}},function(e){e.O(0,[351],(function(){return 15113,e(e.s=15113)})),e.O()}]);